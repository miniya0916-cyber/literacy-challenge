<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì˜¤ëŠ˜ì˜ ë¬¸í•´ë ¥ ì±Œë¦°ì§€</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
        }
        .explanation {
            background-color: #f3f4f6; /* gray-100 */
            border-left: 4px solid #3b82f6; /* blue-500 */
            padding: 12px;
            margin-top: 8px;
            border-radius: 4px;
            font-size: 0.9rem;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4">

    <div class="container w-full max-w-2xl bg-white rounded-2xl shadow-lg p-6 md:p-8">
        <header class="text-center mb-6">
            <h1 class="text-2xl md:text-3xl font-bold text-blue-600">ğŸ“ ì˜¤ëŠ˜ì˜ ë¬¸í•´ë ¥ ì±Œë¦°ì§€</h1>
            <p id="date-display" class="text-gray-600 font-semibold mt-2"></p>
        </header>
        
        <main id="test-content">
            <section id="passage-container" class="bg-blue-50 p-5 rounded-lg mb-6 border border-blue-200">
                <h2 id="passage-topic" class="text-lg font-bold text-blue-800 mb-2"></h2>
                <p id="passage" class="text-gray-800 leading-relaxed"></p>
            </section>

            <section id="student-info" class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                <div>
                    <label for="department" class="block font-semibold text-gray-700 mb-1">í•™ê³¼</label>
                    <select id="department" name="department" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option value="">í•™ê³¼ ì„ íƒ</option>
                        <option value="ê¸°ê³„ê³¼">ê¸°ê³„ê³¼</option>
                        <option value="ì „ê¸°ê³¼">ì „ê¸°ê³¼</option>
                        <option value="ì „ìê³¼">ì „ìê³¼</option>
                        <option value="í™”ê³µê³¼">í™”ê³µê³¼</option>
                        <option value="ë””ìì¸ê³¼">ë””ìì¸ê³¼</option>
                        <option value="ì»´í“¨í„°ê³¼">ì»´í“¨í„°ê³¼</option>
                    </select>
                </div>
                <div>
                    <label for="studentId" class="block font-semibold text-gray-700 mb-1">í•™ë²ˆ</label>
                    <input type="text" id="studentId" name="studentId" placeholder="ì˜ˆ) 10101" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                <div>
                    <label for="studentName" class="block font-semibold text-gray-700 mb-1">ì´ë¦„</label>
                    <input type="text" id="studentName" name="studentName" placeholder="ì˜ˆ) í™ê¸¸ë™" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
            </section>
            
            <section id="quiz-form">
                <!-- í€´ì¦ˆ ë¬¸í•­ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤. -->
            </section>
            
            <button id="submit-btn" class="w-full bg-blue-600 text-white py-3 rounded-lg font-bold text-lg hover:bg-blue-700 transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 mt-4">
                ì œì¶œ ë° ì •ë‹µ í™•ì¸
            </button>
            <p id="result" class="text-center text-xl font-bold mt-6"></p>
        </main>
        
        <div id="no-test-message" class="text-center py-10" style="display:none;">
            <p class="text-xl font-bold text-gray-700">ì˜¤ëŠ˜ì€ ì˜ˆì •ëœ í…ŒìŠ¤íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
            <p class="text-gray-500 mt-2">í…ŒìŠ¤íŠ¸ ê¸°ê°„: 2025ë…„ 8ì›” 25ì¼ ~ 2025ë…„ 12ì›” 19ì¼</p>
        </div>
    </div>

<script>
// -------------------- START: ì½˜í…ì¸  ì…ë ¥ ì˜ì—­ --------------------
// ê° ë¬¸ì œì— í•´ì„¤(e)ì„ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.
const dailyContent = [
    {
        date: "2025-08-25",
        topic: "[ê¸°ê³„ê³¼] âš™ï¸ 3D í”„ë¦°íŒ… ê¸°ìˆ ì˜ ì›ë¦¬",
        passage: `3D í”„ë¦°íŒ…ì€ 'ì ì¸µ ê°€ê³µ' ë°©ì‹ì„ ì‚¬ìš©í•˜ì—¬ 3ì°¨ì› ë¬¼ì²´ë¥¼ ë§Œë“¤ì–´ë‚´ëŠ” ê¸°ìˆ ì…ë‹ˆë‹¤. ì´ëŠ” ì–‡ì€ ì¸µ(Layer)ì„ í•œ ê²¹ì”© ìˆœì„œëŒ€ë¡œ ìŒ“ì•„ ì˜¬ë ¤ í˜•íƒœë¥¼ ì™„ì„±í•˜ëŠ” ì›ë¦¬ì…ë‹ˆë‹¤. ë§ˆì¹˜ ì‹œë£¨ë–¡ì„ í•œ ì¸µì”© ìŒ“ì•„ ì˜¬ë¦¬ëŠ” ê²ƒê³¼ ë¹„ìŠ·í•˜ë‹¤ê³  ìƒê°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê¸°ì¡´ì˜ 'ì ˆì‚­ ê°€ê³µ'ì´ í° ë©ì–´ë¦¬ë¥¼ ê¹ì•„ë‚´ë©° ëª¨ì–‘ì„ ë§Œë“œëŠ” ê²ƒê³¼ëŠ” ì •ë°˜ëŒ€ì˜ ì ‘ê·¼ë²•ì´ì£ . ì´ ê¸°ìˆ  ë•ë¶„ì— ë³µì¡í•˜ê³  ì •êµí•œ ì‹œì œí’ˆ ì œì‘ì´ í›¨ì”¬ ë¹ ë¥´ê³  ì €ë ´í•´ì¡ŒìŠµë‹ˆë‹¤. ë˜í•œ, ê°œì¸ ë§ì¶¤í˜• ì œí’ˆ ìƒì‚°ì´ë‚˜ ì˜ë£Œ ë¶„ì•¼ì˜ ì¸ê³µ ì¥ê¸° ì œì‘ ë“± í™œìš© ë²”ìœ„ê°€ ë¬´ê¶ë¬´ì§„í•˜ê²Œ ë„“ì–´ì§€ê³  ìˆìŠµë‹ˆë‹¤. ë¯¸ë˜ ì œì¡°ì—…ì˜ í˜ì‹ ì„ ì´ëŒ í•µì‹¬ ê¸°ìˆ ë¡œ ì£¼ëª©ë°›ëŠ” ì´ìœ ì…ë‹ˆë‹¤.`,
        questions: [
            {q: "1. 3D í”„ë¦°íŒ…ì˜ í•µì‹¬ ì›ë¦¬ì¸ 'ì ì¸µ ê°€ê³µ'ì€ ë¬´ì—‡ì„ ìŒ“ì•„ ì˜¬ë¦¬ëŠ” ë°©ì‹ì¸ê°€ìš”?", a: "ì–‡ì€ ì¸µ", e: "ë³¸ë¬¸ì˜ ë‘ ë²ˆì§¸ ì¤„ì—ì„œ 'ì–‡ì€ ì¸µ(Layer)ì„ í•œ ê²¹ì”© ìˆœì„œëŒ€ë¡œ ìŒ“ì•„ ì˜¬ë ¤'ë¼ê³  ì„¤ëª…í•˜ê³  ìˆìŠµë‹ˆë‹¤."},
            {q: "2. ê¸€ì—ì„œ 3D í”„ë¦°íŒ…ê³¼ ë°˜ëŒ€ë˜ëŠ” ê°œë…ìœ¼ë¡œ ì„¤ëª…ëœ ê°€ê³µ ë°©ì‹ì€ ë¬´ì—‡ì¸ê°€ìš”?", a: "ì ˆì‚­ ê°€ê³µ", e: "ë³¸ë¬¸ì˜ ë„¤ ë²ˆì§¸ ì¤„ì—ì„œ 'ê¸°ì¡´ì˜ ì ˆì‚­ ê°€ê³µì´ í° ë©ì–´ë¦¬ë¥¼ ê¹ì•„ë‚´ë©° ëª¨ì–‘ì„ ë§Œë“œëŠ” ê²ƒê³¼ëŠ” ì •ë°˜ëŒ€'ë¼ê³  ëª…ì‹œë˜ì–´ ìˆìŠµë‹ˆë‹¤."},
            {q: "3. ì´ ê¸°ìˆ  ë•ë¶„ì— ë¬´ì—‡ì„ ë§Œë“œëŠ” ê³¼ì •ì´ ë” ë¹ ë¥´ê³  ì €ë ´í•´ì¡Œë‚˜ìš”?", a: "ì‹œì œí’ˆ", e: "ë‹¤ì„¯ ë²ˆì§¸ ì¤„ì— 'ë³µì¡í•˜ê³  ì •êµí•œ ì‹œì œí’ˆ ì œì‘ì´ í›¨ì”¬ ë¹ ë¥´ê³  ì €ë ´í•´ì¡Œë‹¤'ê³  ë‚˜ì™€ ìˆìŠµë‹ˆë‹¤."},
            {q: "4. ë³¸ë¬¸ì— ì–¸ê¸‰ëœ 3D í”„ë¦°íŒ…ì˜ í™œìš© ë¶„ì•¼ ë‘ ê°€ì§€ëŠ” ë¬´ì—‡ì¸ê°€ìš”?", a: "ê°œì¸ ë§ì¶¤í˜• ì œí’ˆ ìƒì‚°, ì˜ë£Œ ë¶„ì•¼", e: "ì—¬ì„¯ ë²ˆì§¸ ì¤„ì—ì„œ 'ê°œì¸ ë§ì¶¤í˜• ì œí’ˆ ìƒì‚°ì´ë‚˜ ì˜ë£Œ ë¶„ì•¼ì˜ ì¸ê³µ ì¥ê¸° ì œì‘'ì„ í™œìš© ë²”ìœ„ì˜ ì˜ˆì‹œë¡œ ë“¤ê³  ìˆìŠµë‹ˆë‹¤."},
            {q: "5. ì´ ê¸€ì˜ ì£¼ì œë¡œ ê°€ì¥ ì ì ˆí•œ ê²ƒì€ ë¬´ì—‡ì¼ê¹Œìš”?", a: "3D í”„ë¦°íŒ…ì˜ ì›ë¦¬ì™€ í™œìš©", e: "ê¸€ ì „ì²´ê°€ 3D í”„ë¦°íŒ…ì˜ 'ì ì¸µ ê°€ê³µ' ì›ë¦¬ë¥¼ ì„¤ëª…í•˜ê³ , ì‹œì œí’ˆ ì œì‘ ë° ì˜ë£Œ ë¶„ì•¼ ë“± 'í™œìš©' ì‚¬ë¡€ë¥¼ ë‹¤ë£¨ê³  ìˆìŠµë‹ˆë‹¤."}
        ]
    },
    // ... ë‹¤ë¥¸ ë‚ ì§œì˜ ì½˜í…ì¸ ì—ë„ ëª¨ë‘ 'e' (í•´ì„¤) í•­ëª©ì„ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤.
];
// -------------------- END: ì½˜í…ì¸  ì…ë ¥ ì˜ì—­ --------------------

// -------------------- START: êµ¬ê¸€ ì‹œíŠ¸ ì—°ë™ ì„¤ì • --------------------
// ì•„ë˜ ì£¼ì†ŒëŠ” 2ë‹¨ê³„ì—ì„œ ìƒì„±í•œ ë³¸ì¸ì˜ ì›¹ ì•± URLë¡œ ë°˜ë“œì‹œ êµì²´í•´ì•¼ í•©ë‹ˆë‹¤.
const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzerSRbKxZ3U3S8YhVO32sIpeqYojyuIz9x6dVFz0BDJ_EYMWx2KnIR71BSEnPmmSps/exec';
// -------------------- END: êµ¬ê¸€ ì‹œíŠ¸ ì—°ë™ ì„¤ì • --------------------

document.addEventListener('DOMContentLoaded', function() {
    const today = new Date();
    const year = today.getFullYear();
    const month = String(today.getMonth() + 1).padStart(2, '0');
    const day = String(today.getDate()).padStart(2, '0');
    const formattedDate = `${year}-${month}-${day}`;

    document.getElementById('date-display').textContent = `${year}ë…„ ${today.getMonth() + 1}ì›” ${today.getDate()}ì¼`;

    const content = dailyContent.find(item => item.date === formattedDate);

    if (content) {
        document.getElementById('passage-topic').textContent = content.topic;
        document.getElementById('passage').textContent = content.passage;
        
        const quizForm = document.getElementById('quiz-form');
        content.questions.forEach((q, index) => {
            const quizItem = document.createElement('div');
            quizItem.classList.add('quiz-item', 'mb-4');
            quizItem.innerHTML = `
                <label for="q${index}" class="block font-semibold text-gray-700 mb-1">${q.q}</label>
                <input type="text" id="q${index}" name="q${index}" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                <div id="exp${index}" class="explanation" style="display:none;"></div>
            `;
            quizForm.appendChild(quizItem);
        });

        document.getElementById('submit-btn').addEventListener('click', () => {
            const department = document.getElementById('department').value;
            const studentId = document.getElementById('studentId').value.trim();
            const studentName = document.getElementById('studentName').value.trim();
            const resultEl = document.getElementById('result');

            if (!department || !studentId || !studentName) {
                resultEl.textContent = 'í•™ê³¼, í•™ë²ˆ, ì´ë¦„ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”!';
                resultEl.className = 'text-center text-xl font-bold mt-6 text-red-600';
                return;
            }

            let score = 0;
            let allAnswered = true;
            const userAnswers = [];

            content.questions.forEach((q, index) => {
                const inputElement = document.getElementById(`q${index}`);
                const userAnswer = inputElement.value.trim();
                userAnswers.push(userAnswer);
                if (userAnswer === '') allAnswered = false;
            });

            if (!allAnswered) {
                resultEl.textContent = 'ëª¨ë“  ë¬¸ì œì— ë‹µì„ ì…ë ¥í•´ì£¼ì„¸ìš”!';
                resultEl.className = 'text-center text-xl font-bold mt-6 text-red-600';
                return;
            }
            
            // ë°ì´í„° ì œì¶œ ë¡œì§
            const submissionData = {
                timestamp: new Date().toLocaleString("ko-KR"),
                department,
                studentId,
                studentName,
                testDate: formattedDate,
                topic: content.topic,
                answers: JSON.stringify(userAnswers) // ë°°ì—´ì„ JSON ë¬¸ìì—´ë¡œ ë³€í™˜
            };

            fetch(GOOGLE_SCRIPT_URL, {
                method: 'POST',
                mode: 'no-cors', // CORS ì—ëŸ¬ ë°©ì§€ë¥¼ ìœ„í•´ no-cors ëª¨ë“œ ì‚¬ìš©
                cache: 'no-cache',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(submissionData)
            }).catch(err => console.error("Error submitting data:", err));


            // ì •ë‹µ í™•ì¸ ë° í•´ì„¤ í‘œì‹œ
            content.questions.forEach((q, index) => {
                const inputElement = document.getElementById(`q${index}`);
                const userAnswer = userAnswers[index];
                const formattedUserAnswer = userAnswer.replace(/\s+/g, '').toLowerCase();
                const formattedCorrectAnswer = q.a.replace(/\s+/g, '').toLowerCase();
                const explanationEl = document.getElementById(`exp${index}`);

                if (formattedUserAnswer === formattedCorrectAnswer) {
                    score++;
                    inputElement.style.borderColor = '#10B981'; // Green-500
                } else {
                    inputElement.style.borderColor = '#EF4444'; // Red-500
                }
                
                explanationEl.innerHTML = `<strong>ì •ë‹µ:</strong> ${q.a}<br><strong>í•´ì„¤:</strong> ${q.e}`;
                explanationEl.style.display = 'block';
                inputElement.disabled = true; // ìˆ˜ì • ë¶ˆê°€
            });

            submissionData.score = `${score}/${content.questions.length}`; // ì ìˆ˜ ì¶”ê°€
            // ì ìˆ˜ í¬í•¨í•˜ì—¬ ë‹¤ì‹œ ì „ì†¡ (ì‹¤ì œë¡œëŠ” í•œ ë²ˆì— ë³´ë‚´ëŠ” ê²ƒì´ ë” íš¨ìœ¨ì )
            fetch(GOOGLE_SCRIPT_URL, {
                method: 'POST',
                mode: 'no-cors',
                cache: 'no-cache',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(submissionData)
            });

            resultEl.textContent = `ì œì¶œ ì™„ë£Œ! ê²°ê³¼: ${content.questions.length}ë¬¸ì œ ì¤‘ ${score}ë¬¸ì œë¥¼ ë§í˜”ìŠµë‹ˆë‹¤! ğŸ‰`;
            resultEl.className = 'text-center text-xl font-bold mt-6 text-green-600';
            document.getElementById('submit-btn').disabled = true;
            document.getElementById('submit-btn').textContent = 'ì œì¶œì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤';
            document.getElementById('submit-btn').classList.remove('bg-blue-600', 'hover:bg-blue-700');
            document.getElementById('submit-btn').classList.add('bg-gray-400', 'cursor-not-allowed');
        });

    } else {
        document.getElementById('test-content').style.display = 'none';
        document.getElementById('no-test-message').style.display = 'block';
    }
});
</script>

</body>
</html>
